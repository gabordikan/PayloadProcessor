var eventData = bindObject('event_data');
var requestData = bindObject('REQUEST_DATA');
var attachmentPdf = getAttachmentDataByAttachmentMnemonicAndBodySite('OCT_REPORT_JPG', null);
var eventID;


eventData.$$_XID_Map_$$.forEach(function(data) {
    if (data.$$_XID_$$ == '$$_event[1]_$$') {
        eventID = data.id;
    }
});
var attachmentId = attachmentPdf.getId();
if (requestData.attachmentDataItemToDelete == attachmentId) {
    requestData.attachmentDataItemToDelete = null;
} else {
    linkAttachmentDataWithEvent(attachmentPdf, eventID, 'OEModule\\OphGeneric\\models\\Attachment');
}
createAndSetThumbnailsOnAttachmentData(attachmentPdf);
addRoutine('delink_attachment');